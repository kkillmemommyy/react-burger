import{r as k,E as P,u as R,G as N,R as n,j as s,H as O,d as r,B as y}from"./index-DWZXOIwM.js";import{u as C,t as I,z as i,C as p}from"./zod-DhXA8YOo.js";const T="_main_1hjbe_1",E="_container_1hjbe_8",G="_link_1hjbe_16",c={main:T,container:E,link:G},v=i.object({token:i.string().min(1,"Введите код из сообщения").uuid("Код не соответствует ожидаемому формату"),password:i.string().min(1,"Введите новый пароль").min(6,"Пароль должен содержать не менее 6 символов")}),F=()=>{var u;const[m,h]=k.useState(!1),x=()=>h(t=>!t),S=P(),_=R(),{control:l,handleSubmit:g,formState:{isSubmitting:j},clearErrors:d,setError:w}=C({defaultValues:{password:"",token:""},resolver:I(v),mode:"onSubmit",reValidateMode:"onSubmit"}),[b]=N(),f=async t=>{const e=await b(t);if(e.error&&"status"in e.error)switch(e.error.status){case 404:w("token",{message:"Неверный код"});break}else _(n.LOGIN,{replace:!0})};return((u=S.state)==null?void 0:u.prevPage)!==n.FORGOT_PASSWORD?s.jsx(O,{to:n.FORGOT_PASSWORD,replace:!0}):s.jsxs("main",{className:c.main,children:[s.jsxs("form",{className:c.container,onSubmit:g(f),children:[s.jsx("h1",{className:"text text_type_main-medium",children:"Восстановление пароля"}),s.jsx(p,{name:"password",control:l,render:({field:t,fieldState:{error:e,invalid:a}})=>s.jsx(r.Input,{...t,placeholder:"Введите новый пароль",icon:m?"HideIcon":"ShowIcon",type:m?"text":"password",onIconClick:x,errorText:e==null?void 0:e.message,error:a,onChange:o=>{a&&d("password"),t.onChange(o)}})}),s.jsx(p,{name:"token",control:l,render:({field:t,fieldState:{error:e,invalid:a}})=>s.jsx(r.Input,{...t,placeholder:"Введите код из письма",type:"text",errorText:e==null?void 0:e.message,error:a,onChange:o=>{a&&d("token"),t.onChange(o)}})}),s.jsx(r.Button,{htmlType:"submit",type:"primary",size:"medium",disabled:j,children:"Сохранить"})]}),s.jsxs("p",{className:"text text_type_main-default text_color_inactive mb-4",children:["Вспомнили пароль?"," ",s.jsx(y,{to:n.LOGIN,className:c.link,children:"Войти"})]})]})};export{F as default};
