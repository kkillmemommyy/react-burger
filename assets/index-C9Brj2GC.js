import{a as D,m as N,v as U,r as m,j as n,d as i,b as c}from"./index-BWIYIDuV.js";import{u as P,t as V,z as l,C as x}from"./zod-CbTMoW86.js";const q="_main_x9d7b_1",z="_input_x9d7b_6",F="_container_x9d7b_14",M="_btnWrap_x9d7b_19",o={main:q,input:z,container:F,btnWrap:M},A=l.object({name:l.string().min(1,"Имя обязательно"),email:l.string().min(1,"Email обязателен").email("Некорректный email"),password:l.string().min(6,"Пароль должен содержать не менее 6 символов").or(l.literal(""))}),J=()=>{const b=D(N),[_]=U(),{control:d,handleSubmit:E,formState:{isDirty:h,isValid:y,isSubmitting:C},reset:w,clearErrors:p}=P({defaultValues:{name:"",email:"",password:""},values:b?{...b,password:""}:void 0,resolver:V(A),mode:"onChange",delayError:400}),R=!h||C,T=!h||C||!y,g=m.useRef(null),j=m.useRef(null),I=m.useRef(null),[r,u]=m.useState({name:!1,email:!1,password:!1}),k=()=>{u({email:!1,name:!1,password:!1}),w()},f=e=>{u({email:!1,name:!1,password:!1,[e]:!r[e]}),setTimeout(()=>{var s;const a={name:g,email:j,password:I}[e];(s=a==null?void 0:a.current)==null||s.focus()},0)},B=async e=>{const{password:a,...s}=e,t=a?e:s;u({email:!1,name:!1,password:!1});const S=await _(t);if(S.data){const{name:W,email:v}=S.data.user;w({name:W,email:v,password:""})}};return n.jsx("main",{className:o.main,children:n.jsxs("form",{onSubmit:E(B),children:[n.jsx(x,{name:"name",control:d,render:({field:e,fieldState:{invalid:a,error:s}})=>n.jsx(i.Input,{...e,placeholder:"Имя",type:"text",icon:"EditIcon",ref:g,disabled:!r.name,onIconClick:()=>f("name"),error:a,errorText:s==null?void 0:s.message,extraClass:c("mb-6",o.input),onChange:t=>{a&&p("name"),e.onChange(t)}})}),n.jsx(x,{name:"email",control:d,render:({field:e,fieldState:{invalid:a,error:s}})=>n.jsx(i.Input,{...e,placeholder:"Логин",type:"text",icon:"EditIcon",ref:j,disabled:!r.email,onIconClick:()=>f("email"),error:a,errorText:s==null?void 0:s.message,extraClass:c("mb-6",o.input),onChange:t=>{a&&p("email"),e.onChange(t)}})}),n.jsx(x,{name:"password",control:d,render:({field:e,fieldState:{invalid:a,error:s}})=>n.jsx(i.Input,{...e,placeholder:"Пароль",type:"password",icon:"EditIcon",ref:I,disabled:!r.password,onIconClick:()=>f("password"),error:a,errorText:s==null?void 0:s.message,extraClass:c("mb-6",o.input),onChange:t=>{a&&p("password"),e.onChange(t)}})}),n.jsxs("div",{className:o.container,children:[n.jsx("div",{className:c("mr-5",o.btnWrap),children:n.jsx(i.Button,{htmlType:"reset",onClick:k,disabled:R,children:"Отменить"})}),n.jsx(i.Button,{htmlType:"submit",disabled:T,children:"Сохранить"})]})]})})};export{J as default};
