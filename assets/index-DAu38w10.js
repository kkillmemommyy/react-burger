import{r as N,A as R,j as s,b as k,d as i,B as h,R as p}from"./index-Vb9U23jt.js";import{u as T,t as C,z as m,C as _}from"./zod-BsuFSmjL.js";const I="_main_1a3j9_1",P="_container_1a3j9_8",v="_link_1a3j9_16",O="_authError_1a3j9_20",a={main:I,container:P,link:v,authError:O},A=m.object({email:m.string().min(1,"Введите email").email("Некорректный email"),password:m.string().min(1,"Введите пароль")}),z=()=>{var x;const[l,j]=N.useState(!1),[g]=R(),E=()=>j(t=>!t),{control:c,handleSubmit:S,formState:{isSubmitting:f,errors:o,isSubmitted:b},setError:w,clearErrors:d}=T({defaultValues:{email:"",password:""},resolver:C(A),mode:"onSubmit",delayError:600}),y=async t=>{const e=await g(t);if(e.error&&"status"in e.error)switch(e.error.status){case 401:w("root.serverError",{message:"Неверный логин или пароль"});break}},u=(t,e)=>{var r;b&&((r=o.root)!=null&&r.serverError&&d("root"),e&&d(t))};return s.jsxs("main",{className:a.main,children:[s.jsxs("form",{className:a.container,onSubmit:S(y),children:[s.jsx("h1",{className:"text text_type_main-medium",children:"Вход"}),((x=o.root)==null?void 0:x.serverError)&&s.jsx("p",{className:k(a.authError,"text text_type_main-default"),children:o.root.serverError.message}),s.jsx(_,{name:"email",control:c,render:({field:t,fieldState:{error:e,invalid:r}})=>s.jsx(i.Input,{...t,type:"text",placeholder:"E-mail",errorText:e==null?void 0:e.message,error:r,onChange:n=>{u("email",r),t.onChange(n)}})}),s.jsx(_,{name:"password",control:c,render:({field:t,fieldState:{error:e,invalid:r}})=>s.jsx(i.Input,{...t,placeholder:"Пароль",icon:l?"HideIcon":"ShowIcon",type:l?"text":"password",onIconClick:E,errorText:e==null?void 0:e.message,error:r,onChange:n=>{u("email",r),t.onChange(n)}})}),s.jsx(i.Button,{htmlType:"submit",type:"primary",size:"medium",disabled:f,children:"Войти"})]}),s.jsxs("p",{className:"text text_type_main-default text_color_inactive mb-4",children:["Вы — новый пользователь?"," ",s.jsx(h,{to:p.REGISTRATION,className:a.link,children:"Зарегистрироваться"})]}),s.jsxs("p",{className:"text text_type_main-default text_color_inactive mb-4",children:["Забыли пароль?"," ",s.jsx(h,{to:p.FORGOT_PASSWORD,className:a.link,children:"Восстановить пароль"})]})]})};export{z as default};
